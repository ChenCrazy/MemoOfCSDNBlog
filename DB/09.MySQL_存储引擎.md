
## 存储引擎简介 

* 查看数据表的创建命令:SHOW CREATE table tb_name
  * 显示数据表的相关属性,其中`ENGING=InnoDB DEFAULT CHARSET=utf8`显示出存储引擎
* MySQL可以将数据以不同的技术存储在文件(内存)中,这种技术就称为存储引擎。每种存储引擎使用不同的存储机制、索引技巧、锁定水平、最终提供广泛且不同的功能。
* MySQL支持的存储引擎主要有:MyISAM、InnoDB、Memory、CSV、Archive

## 相关知识点之并发处理 

* 并发控制,当多个连接对记录进行修改时,保证数据的一致性和完整性的技术。
  * 解决并发读或者并发写时,系统会使用一套锁系统来解决,分为共享锁、和排它锁。
* **共享锁**(读锁):在同一个时间段内,多个用户可以读取同一个资源,读取过程中数据不会发生任何变化,此过程相互不做干扰。
* **排他锁**(写锁):在任何时候只能有一个用户写入资源,当进行写锁时会阻塞其他的读锁或者写锁操作。这是出于安全策略的考虑,在特定的时间内,只用一个用户能写入资源,以防止其他用户也在操作资源。
  * 加锁会增加系统的开销,所以我们通过锁策略,在锁开销与数据安全之间寻求一种平衡。
* 锁的颗粒(粒度):锁的单位,只需要对需要修改的数据精确加锁,而无需对所有的资源都加锁。
  * 表锁:是一种开销最小的锁策略
    * 当用户对一张数据表进行操作时,用户对这张数据表即拥有写锁的权限,写锁会禁止其他用户进行读写操作。
  * 行锁:是一种开销最大的锁策略

## 相关知识点之事务处理

* 事务是数据库区别于文件系统的重要区别之一,事务的主要作用在于保证数据库的完整性
* 事务的基本特性,ACID
  * 原子性(Atomicity)
  * 一致性(Consitency)
  * 隔离性(Isolation)
  * 持久性(Durability)

## 相关知识点之外键和索引 

* 外键,保证数据一致性的策略。
* 索引,是对数据表中的一列或多列的值进行排序的一种结构。使用索引可以快速的访问数据表中的特定信息。索引是进行记录、快速定位的一种方法。
  * 普通索引,唯一索引,全文索引,btree索引,hash索引等...

## 各个存储引擎特点 

 特点 | MyISAM | InnoDB | Memory | Archive
:---------|----------:|---------:|---------:|---------:
 存储限制 | 256TB | 64TB | 有 | 无
 事务安全 | - | 支持 | - | -
 支持索引 | 支持 | 支持 | 支持 | -
 锁颗粒 | 表锁 | 行锁 | 表锁 | 行锁
 数据压缩 | 支持 | - | - | 支持
 支持外键 | - | 支持 | - | -

* CSV,以逗号分隔的存储引擎,会在每一个表创建一个CSV的文本文件,每一个数据行占用一个文本行,不支持索引
* BlackHole,黑洞引擎,写入的数据都会消失,一般用于做数据复制的中继
* MyISAM适用于事务处理不多的情况,存储限制可达256TB,支持索引、表级锁定、数据压缩。
* InnoDB适用于事务处理较多,需要有外键支持的情况。存储限制为64TB,支持事务和索引、锁颗粒为行锁。

## 设置存储引擎

* 修改存储引擎的方法
  * 1.通过MySQL配置文件实现<br>
  `default-storage-engine=engine`
  * 2.通过创建数据表命令实现
  ```sql
    CREATE TABLE table_name(
      ...
      ...
    )ENGINE = engine;
  ```
  * 通过修改数据表命令实现<br>
  `ALTER TAABLE table_name ENGINE[=] engine_name;`
