# 数据库分析步骤  
关于数据库课程，点击如下链接  
>[数据库系统（上）：模型与语言](http://www.icourse163.org/learn/HIT-1001516002?tid=1002049007)  
[数据库系统（中）：建模与设计](http://www.icourse163.org/learn/HIT-1001554030?tid=1002045009)  
[数据库系统（下）：管理与技术](http://www.icourse163.org/learn/HIT-1001578001?tid=1002044008)  

~~给自己备忘：微信登陆中国大学MOOK~~  
  
## 一、数据库需求分析  

*  目标：企业业务过程与数据处理流程、理解数据处理点性能需求  
*  结果：提交需求分析报告  
* 使以下内容清楚：  
  * 企业的部门-岗位划分：不同岗位负责的各种日常管理信息表/报表  
  * 形成各种报表的基础数据表  
  * 各种数据表之间的处理关系(what-how)   
  * 围绕数据表的业务处理关系(who-when-where)  
  * 尚未实施但未来可能实施的需求  
* 形成数据库设计的源清单和属性清单以及相关的详细描述，尤其是注意业务规则与属性处理规则  
* 结合数据流图进行辅助分析与理解  
* 注意收集和理解：业务规则及其在表的处理方面的体现。不仅报表、单据是源，企业的查询需求与管理需求等也是源  
* 命名一定要规范，并且含义明确：尤其注意类似‘数量’这样多含义属性，比如‘计划数量’‘采购数量’‘到货数量’‘销售数量’等。  
* 注意表述清楚属性的含义。准确理解对属性的业务规则，取值范围，填写计算规则  
* 小结：次序划分：了解部门-岗位划分——>对每个岗位收集源形成源表，对每一个源表登记造册——>理解每一个源：属性构成，处理规则，属性处理规则——>需求分析报告(借助其他方法辅助理解，如数据流图，功能图表)  

## 二、概念数据库设计  

* 目标：进一步深入理解企业，对信息源进行抽象，发现目标(属性)之间的内在本质联系，这些本质联系可能隐藏于需求分析得到的信息源表中。所以要分析哪些信息应该放在一起，哪些信息要拆分开  
*  结果：提交出概念数据库设计报告
* 使用以下内容说明清楚：
  * 各种实体的发现，划分定义：采用E-R图的方式等
  * 各种实体的属性的发现，分析和定义
  * 各种实体属性联系的发现，分析和定义
  * 外部视图(模式)和概念视图(模式)的定义
* 统一的表达方法，如E-R模型/IDEF1X模型给出描述：不仅绘制出来，而且绘制正确语义正确，用规范的数据模型表达，有助于相关人员理解需求。  
* 概念数据库设计的两种设计思路  
  * 先局部后全局  
  * 先全局后全局  
* 概念数据库设计的可能冲突  
  * 属性冲突  
    * 属性域的冲突：属性的类型，取值范围不同  
    * 属性取值范围冲突  
  * 结构冲突  
    * 同一对象在不同应用中的抽象不同  
    * 同一实体在不同E-R图中属性组成不同  
    * 实体间的联系在不同E-R图中呈现不同的类型  
  * 命名冲突  
    * 同名异义  
    * 异名同义  
* 相关结果性内容示意：绘制不同层级的E-R图：实体级图、键图以及完整图，以细致度界定，联系 属性矩阵  
* 小结：依据需求分析报告——> 识别实体与联系 ——> 绘制图表来表达业务规则——>定义实体联系及实体属性组成——>形成并提交概念数据设计报告(消除冲突)  

## 三、逻辑数据库设计  

* 目标：用指定DBMS要求的模式描述方法，给出概念数据库的逻辑模式描述 
* 结果：提交逻辑数据库报告
* 使以下内容清楚：
  * 将图表转换成逻辑模式
  * 遵循关系范式的设计原则
  * 判断模式设计主要存在的问题，提醒开发使用者
  * 给出全局模式和外模式的定义
* 用关系模型、网模型或层次模型规定的模式描述方法进行描述
* E-R图向关系模式的转换  
  * 基本转换规则：实体-属性-关键字的转换
    * E-R图的<font color='red'>实体</font>转换为<font color='red'>关系</font>
    * E-R图的<font color='red'>属性</font>转换为<font color='red'>关系的属性</font>
    * E-R图的<font color='red'>关键字</font>转换为<font color='red'>关系的关键字</font>
  * 基本转换规则：复合属性的转换
    * 将每个分量属性作为复合属性所在实体的属性
    * 将复合属性本身作为所在实体的属性
  * 联系的转换
    * 一对一联系
      * 若联系双方均部分参与，则将联系定义为一个新的关系，属性为参与双方的关键字属性
      * 若联系只有一方全部参与，则将联系另一方的关键字作为全部参与一方联系的属性  
    * 一对多的联系
      * 将单方参与实体的关键字作为对方参与实体对应关系的属性 
    * 多对多的联系  
      * 将联系定义为新的关系，以属性为参与双方实体的关键字
  * 基本转换规则：弱实体的转换  
    ~~强实体弱实体，即实体中双方所占据的信息数量及依赖关系决定，弱实体一方的存在必须以强实体一方的存在为前提~~  
    * 弱实体所对应关系的关键字，由弱实体本身的区分属性再加上所依赖的强实体的关键字构成  
    * 弱实体集(从属实体)与强实体集(独立实体)之间的联系已经在弱实体集所队用的关系中表示出来了
  * 基本转换规则：泛化与具体化实体的转换isa关系
    * 高层实体(泛化实体)和底层实体(具体化实体)分别转换为不同的关系
    * 底层实体所对应的关系包括高层实体的关键字加上本身的属性
    * 转换1：包含高层次的关键字和本身属性组成
      * 缺点：查询底层属性的同时需要访问两个/多个表
    * 转换2: 如果泛化实体实例是具体化实例的全部，则无需创建泛化表
      * 缺点： 泛化属性肯呢个在具体化中出现多次
  * 多元联系的转换
    * 多元联系可以通过继承参与联系的各个实体的关键字形成新的关系
    * 这些继承过来的关键字可作为新关系的关键字，也可以新增一个区分属性作为关键字
    * 多元联系更需要注意分析参与联系的实体的最小基数和最大基数
* 是否存在问题 
  * 数据冗余 受控冗余，非受控冗余 
  * 插入异常，删除异常 
  * 避免： 
    * 设计满足规范性，由DBMS或数据库本身来保证
    * 设计不满足规范性，由使用者或应用程序员使用过程中加以注意
  * 规范的数据库设计理论
    * 数据依赖理论：函数依赖，部分依赖/完全函数依赖，传递函数依赖，多值依赖，联结依赖  
    * 关系范式理论：第一范式1FN,2FN,3FN,BCFN,4FN,5FN  
    * 模式分解理论:无损连接分解，保持依赖分解
* 小结 ：依据概念数据库报告 ——> E-R图/IDEF1x图向关系模型的转换+ 数据库设计理论及其应用 ——> 检查逻辑数据库设计的正确性 ——> 定义全局模式和外模式 ——> 形成并提交逻辑数据库设计报告

## 四、物理设计库设计
 
* 目标：结合指定的DBMS物理数据管理方法，给出概念数据库的物理模式描述
* 结果：提交物理数据库报告
* 使以下内容清楚：
  * DBMS选型
  * 确定数据库的存储结构，文件类型：如定长文件、不定长文件;堆文件，散列文件或B-Tree文件  
  * Triggers，设计一些完整性控制约束
  * 确定数据库的高效访问方式(索引访问，直接访问...)
  * 评估和设置磁盘空间需求
  * 设计用户视图及访问控制规则，以进行安全性控制
  * 建立索引
  * 设计使设计库运行达到最佳效率的一些措施
  * 设计备份Backup和恢复Recover的步骤
* 理解Oracle、Sybase或其他DBMS的物理数据库管理方式，这是数据库管理员(DBA)的基本责任。
* 小结： 依据逻辑数据库设计报告——> 利用具体DBMS创建数据库/表 + 数据库管理系统的实现技术-数据库存储与索引技术，查询实现与优化技术等(数据库系统理论+具体数据库管理系统软件产品的相关知识)——>确定物理存储方式与存储空间——> 创建索引、视图等——>形成并提交物理数据库设计报告  

## 五、小结
数据库设计过程中各部分主要考虑一下操作(省略细致操作)： 

* 需求分析：主要注意数据源的获取和理解
* 概念数据库设计：考虑绘制E-R图/IDEF1x图，建立概念模型
* 逻辑数据库设计阶段：主要设计全局模式和用户模式
* 物理数据库设计： 具体DBMS上的存储

